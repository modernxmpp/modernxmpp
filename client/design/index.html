<!DOCTYPE html>
<html lang="en">
    <head>
        <meta charset="utf-8">
        <meta http-equiv="X-UA-Compatible" content="IE=edge">
        <meta name="viewport" content="width=device-width, initial-scale=1.0">
        
        
        <link rel="canonical" href="https://docs.modernxmpp.org/client/design/">
        <link rel="shortcut icon" href="../../img/favicon.ico">
        <title>User Interface - Modern XMPP</title>
        <link href="../../css/bootstrap.min.css" rel="stylesheet">
        <link href="../../css/font-awesome.min.css" rel="stylesheet">
        <link href="../../css/base.css" rel="stylesheet">
        <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/9.12.0/styles/github.min.css">
        <link href="../../css/modernxmpp.css" rel="stylesheet">

        <script src="../../js/jquery-1.10.2.min.js" defer></script>
        <script src="../../js/bootstrap.min.js" defer></script>
        <script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/9.12.0/highlight.min.js"></script>
        <script>hljs.initHighlightingOnLoad();</script> 
    </head>

    <body>
        <div class="navbar fixed-top navbar-expand-lg navbar-dark bg-primary">
            <div class="container">
                <a class="navbar-brand" href="../..">Modern XMPP</a>
                <!-- Expander button -->
                <button type="button" class="navbar-toggler" data-toggle="collapse" data-target="#navbar-collapse">
                    <span class="navbar-toggler-icon"></span>
                </button>

                <!-- Expanded navigation -->
                <div id="navbar-collapse" class="navbar-collapse collapse">
                        <!-- Main navigation -->
                        <ul class="nav navbar-nav">
                            <li class="navitem">
                                <a href="../.." class="nav-link">Home</a>
                            </li>
                            <li class="dropdown active">
                                <a href="#" class="nav-link dropdown-toggle" data-toggle="dropdown">Guidelines <b class="caret"></b></a>
                                <ul class="dropdown-menu">
                                    
<li>
    <a href="./" class="dropdown-item active">User Interface</a>
</li>
                                    
<li>
    <a href="../protocol/" class="dropdown-item">Protocol</a>
</li>
                                    
<li>
    <a href="../groupchat/" class="dropdown-item">Multi-user Chats</a>
</li>
                                </ul>
                            </li>
                            <li class="navitem">
                                <a href="../../terminology/" class="nav-link">Terminology</a>
                            </li>
                        </ul>

                    <ul class="nav navbar-nav ml-auto">
                        <li class="nav-item">
                            <a href="#" class="nav-link" data-toggle="modal" data-target="#mkdocs_search_modal">
                                <i class="fa fa-search"></i> Search
                            </a>
                        </li>
                            <li class="nav-item">
                                <a rel="prev" href="../.." class="nav-link">
                                    <i class="fa fa-arrow-left"></i> Previous
                                </a>
                            </li>
                            <li class="nav-item">
                                <a rel="next" href="../protocol/" class="nav-link">
                                    Next <i class="fa fa-arrow-right"></i>
                                </a>
                            </li>
                            <li class="nav-item">
                                <a href="https://github.com/modernxmpp/modernxmpp/edit/draft/docs/client/design.md" class="nav-link"><i class="fa fa-github"></i> Edit on GitHub</a>
                            </li>
                    </ul>
                </div>
            </div>
        </div>

        <div class="container">
            <div class="row">
                    <div class="col-md-3"><div class="navbar-light navbar-expand-md bs-sidebar hidden-print affix" role="complementary">
    <div class="navbar-header">
        <button type="button" class="navbar-toggler collapsed" data-toggle="collapse" data-target="#toc-collapse" title="Table of Contents">
            <span class="fa fa-angle-down"></span>
        </button>
    </div>

    
    <div id="toc-collapse" class="navbar-collapse collapse card bg-secondary">
        <ul class="nav flex-column">
            
            <li class="nav-item" data-level="1"><a href="#client-design-guidelines" class="nav-link">Client design guidelines</a>
              <ul class="nav flex-column">
            <li class="nav-item" data-level="2"><a href="#registration" class="nav-link">Registration</a>
              <ul class="nav flex-column">
              </ul>
            </li>
            <li class="nav-item" data-level="2"><a href="#initial-configuration" class="nav-link">Initial configuration</a>
              <ul class="nav flex-column">
              </ul>
            </li>
            <li class="nav-item" data-level="2"><a href="#configuration-options" class="nav-link">Configuration options</a>
              <ul class="nav flex-column">
              </ul>
            </li>
            <li class="nav-item" data-level="2"><a href="#user-status" class="nav-link">User status</a>
              <ul class="nav flex-column">
              </ul>
            </li>
            <li class="nav-item" data-level="2"><a href="#contact-list" class="nav-link">Contact list</a>
              <ul class="nav flex-column">
              </ul>
            </li>
            <li class="nav-item" data-level="2"><a href="#conversation-view" class="nav-link">Conversation view</a>
              <ul class="nav flex-column">
              </ul>
            </li>
            <li class="nav-item" data-level="2"><a href="#notifications" class="nav-link">Notifications</a>
              <ul class="nav flex-column">
              </ul>
            </li>
            <li class="nav-item" data-level="2"><a href="#error-handling" class="nav-link">Error handling</a>
              <ul class="nav flex-column">
              </ul>
            </li>
            <li class="nav-item" data-level="2"><a href="#multiple-accounts" class="nav-link">Multiple accounts</a>
              <ul class="nav flex-column">
              </ul>
            </li>
            <li class="nav-item" data-level="2"><a href="#group-chat" class="nav-link">Group chat</a>
              <ul class="nav flex-column">
              </ul>
            </li>
            <li class="nav-item" data-level="2"><a href="#documentation" class="nav-link">Documentation</a>
              <ul class="nav flex-column">
              </ul>
            </li>
            <li class="nav-item" data-level="2"><a href="#privacy" class="nav-link">Privacy</a>
              <ul class="nav flex-column">
              </ul>
            </li>
            <li class="nav-item" data-level="2"><a href="#names" class="nav-link">Names</a>
              <ul class="nav flex-column">
              </ul>
            </li>
            <li class="nav-item" data-level="2"><a href="#auto-generated-colors" class="nav-link">Auto-generated colors</a>
              <ul class="nav flex-column">
              </ul>
            </li>
              </ul>
            </li>
        </ul>
    </div>
</div></div>
                    <div class="col-md-9" role="main">

<h1 id="client-design-guidelines">Client design guidelines<a class="headerlink" href="#client-design-guidelines" title="Permanent link">&para;</a></h1>
<p>This document lays out a set of guidelines for designing Modern XMPP clients. For contributions,
please <a href="https://github.com/modernxmpp/modernxmpp">open an issue or pull request</a> at Github for discussion.</p>
<h2 id="registration">Registration<a class="headerlink" href="#registration" title="Permanent link">&para;</a></h2>
<div class="admonition todo">
<p class="admonition-title">Todo</p>
</div>
<h2 id="initial-configuration">Initial configuration<a class="headerlink" href="#initial-configuration" title="Permanent link">&para;</a></h2>
<p>At initial startup, a client should present a welcome screen, to prompt the user for their JID,
and a password. Optionally, a button or link to provide other forms of credentials may be included.</p>
<p>If the client has an out-of-band configuration mechanism, or it can query the OS for sensible defaults,
it may use these.</p>
<h2 id="configuration-options">Configuration options<a class="headerlink" href="#configuration-options" title="Permanent link">&para;</a></h2>
<p>List recommended configuration options.</p>
<h3 id="account">Account<a class="headerlink" href="#account" title="Permanent link">&para;</a></h3>
<table>
<thead>
<tr>
<th align="left">Option</th>
<th align="left">Description</th>
</tr>
</thead>
<tbody>
<tr>
<td align="left">JID</td>
<td align="left">The user's JID</td>
</tr>
<tr>
<td align="left">Password</td>
<td align="left">The user's password</td>
</tr>
</tbody>
</table>
<h3 id="network">Network<a class="headerlink" href="#network" title="Permanent link">&para;</a></h3>
<p>Support for these options is OPTIONAL. If included in the client, they MUST NOT
be requested by default at startup, but should be accessible through an advanced options interface.</p>
<table>
<thead>
<tr>
<th align="left">Option</th>
<th align="left">Description</th>
</tr>
</thead>
<tbody>
<tr>
<td align="left">Connect host</td>
<td align="left">The network hostname to connect to</td>
</tr>
<tr>
<td align="left">Connect port</td>
<td align="left">The network port to connect to</td>
</tr>
<tr>
<td align="left">TLS Mode<sup id="fnref:tls-mode"><a class="footnote-ref" href="#fn:tls-mode">2</a></sup></td>
<td align="left">Multiple choice: "STARTTLS" or "Direct TLS"</td>
</tr>
</tbody>
</table>
<p>Both of the above should be automatically discovered from DNS, according to the <a href="https://xmpp.org/rfcs/rfc6120.html#tcp-resolution">rules in RFC 6120</a>.
Clients that support other connection mechanisms, such as BOSH, SHOULD also implement <a href="https://xmpp.org/extensions/xep-0156.html">XEP-0156</a>.</p>
<h3 id="deprecated-options">Deprecated options<a class="headerlink" href="#deprecated-options" title="Permanent link">&para;</a></h3>
<p>Support for these options is NOT RECOMMENDED.</p>
<table>
<thead>
<tr>
<th align="left">Option</th>
<th align="left">Description</th>
<th align="left">Notes</th>
</tr>
</thead>
<tbody>
<tr>
<td align="left">Resource</td>
<td align="left">The resource to request from the server</td>
<td align="left">see <a href="../protocol/#resource-generation">Resource generation</a></td>
</tr>
<tr>
<td align="left">Priority</td>
<td align="left">The priority to include in presence</td>
<td align="left">0</td>
</tr>
</tbody>
</table>
<h2 id="user-status">User status<a class="headerlink" href="#user-status" title="Permanent link">&para;</a></h2>
<p>The client, by default, MUST NOT include any status messages in its presence, unless they are chosen by the user. Built-in status messages that
convey the same meaning as the user's selected 'show' value (e.g. "Available", "Do not disturb") are not allowed.</p>
<p>Allowing the user to set a status message is an OPTIONAL feature.</p>
<h2 id="contact-list">Contact list<a class="headerlink" href="#contact-list" title="Permanent link">&para;</a></h2>
<h3 id="terminology">Terminology<a class="headerlink" href="#terminology" title="Permanent link">&para;</a></h3>
<p>In its interface, the client MUST NOT use the technical term "roster", but MUST instead use the term "contact list" (or a suitable translation)
where necessary. See the main "Terminology" section for more information.</p>
<h3 id="offline-contacts">Offline contacts<a class="headerlink" href="#offline-contacts" title="Permanent link">&para;</a></h3>
<p>The client MUST display offline contacts by default, and allow sending messages to them, as for online contacts..</p>
<h3 id="sorting-of-contact-list">Sorting of contact list<a class="headerlink" href="#sorting-of-contact-list" title="Permanent link">&para;</a></h3>
<p>The client MUST sort the contact list. Either in <a href="https://en.wikipedia.org/wiki/Lexicographical_order">lexicographical order</a> by contact name or
chronologically by the time of the last message exchanged with that contact.</p>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>Historically, some clients have sorted by presence (available, offline,
busy, etc.) as a secondary sorting category.
Due to the rise in mobile clients which always consider themselves
"available", presence is not always a reliable indicator that a contact is
available to chat.</p>
</div>
<p>If sorting chronologically and/or by presence, clients MUST NOT rearrange the
contacts list while fetching history, or when the contact list has focus.
The definition of "focus" depends on the context, but may be the cursor hovering
over the list, the list pane being visible, or the list being selected in a
screen reader or during tab selection.</p>
<h3 id="visualizing-status">Visualizing status<a class="headerlink" href="#visualizing-status" title="Permanent link">&para;</a></h3>
<p>The client MUST display status messages of contacts when present. It MAY also provide visual indication of the contact's status ('show'), but
SHOULD NOT rely on color alone to distinguish different status values<sup id="fnref:color"><a class="footnote-ref" href="#fn:color">1</a></sup>.</p>
<div class="admonition todo">
<p class="admonition-title">Todo</p>
<p>Describe how to display multiple remote resources.</p>
</div>
<h2 id="conversation-view">Conversation view<a class="headerlink" href="#conversation-view" title="Permanent link">&para;</a></h2>
<h3 id="message-states">Message states<a class="headerlink" href="#message-states" title="Permanent link">&para;</a></h3>
<h4 id="outgoing-messages">Outgoing messages<a class="headerlink" href="#outgoing-messages" title="Permanent link">&para;</a></h4>
<p>A client must be able to unambiguously display the following outgoing message states:</p>
<ul>
<li>Message pending delivery</li>
<li>Message delivered to server</li>
<li>Message delivered to contact</li>
<li>Message read by contact</li>
<li>Delivery error for message</li>
</ul>
<div class="admonition todo">
<p class="admonition-title">Todo</p>
<p>Add table or flowchart</p>
</div>
<h2 id="notifications">Notifications<a class="headerlink" href="#notifications" title="Permanent link">&para;</a></h2>
<p>Carbons, notifications for new messages in MAM</p>
<h2 id="error-handling">Error handling<a class="headerlink" href="#error-handling" title="Permanent link">&para;</a></h2>
<p>Obey error types (modify, cancel, wait, etc.)</p>
<p>Do display error text</p>
<h2 id="multiple-accounts">Multiple accounts<a class="headerlink" href="#multiple-accounts" title="Permanent link">&para;</a></h2>
<p>Support for multiple accounts is OPTIONAL.</p>
<div class="admonition todo">
<p class="admonition-title">Todo</p>
<p>Research recommendations for the best way to handle multiple accounts. E.g. merge contacts, or not.
Not required. Describe how to display multiple accounts in a single client?</p>
</div>
<h2 id="group-chat">Group chat<a class="headerlink" href="#group-chat" title="Permanent link">&para;</a></h2>
<p>You can find more details about <a href="../groupchat/">group chats here</a>.</p>
<h2 id="documentation">Documentation<a class="headerlink" href="#documentation" title="Permanent link">&para;</a></h2>
<p>Clients should have documentation covering essential functionality, including:</p>
<div class="admonition todo">
<p class="admonition-title">Todo</p>
<p>List of recommended documentation topics, e.g. how to add a contact</p>
</div>
<h2 id="privacy">Privacy<a class="headerlink" href="#privacy" title="Permanent link">&para;</a></h2>
<p>Clients must not reveal full JID. Don't query unsubscribed contacts.</p>
<div class="admonition todo">
<p class="admonition-title">Todo</p>
<p>Probably belongs in protocol reference. Probably some things relevant
to UI that should be mentioned, however.</p>
</div>
<h2 id="names">Names<a class="headerlink" href="#names" title="Permanent link">&para;</a></h2>
<p>When displaying messages received from a remote JID, either within a one-to-one or multi-user chat, clients need to show a human-readable
name for that sender.</p>
<p>There are multiple sources for such a display name, which depend on the context (e.g. whether the conversation is one-to-one or a group chat).</p>
<h3 id="name-sources">Name sources<a class="headerlink" href="#name-sources" title="Permanent link">&para;</a></h3>
<p>Valid sources are:</p>
<dl>
<dt>Roster</dt>
<dd>If the contact is in the user's roster, and the user has set a custom name.</dd>
<dt>Address book</dt>
<dd>Platform-dependent. If the application is somehow linked to the user's address book and is able to access a contact's information there.</dd>
<dt>User nickname</dt>
<dd>A nickname published by the sender in PEP per <a href="https://xmpp.org/extensions/xep-0172.html">XEP-0172</a>.</dd>
<dt>Resource</dt>
<dd>The resource of the sending JID.</dd>
<dt>Local part</dt>
<dd>The part of a bare JID before the '@' symbol.</dd>
<dt>Bare JID</dt>
<dd>The sending JID with any resource removed.</dd>
</dl>
<h3 id="contexts">Contexts<a class="headerlink" href="#contexts" title="Permanent link">&para;</a></h3>
<p>The kind of view where a name is displayed decides which sources should be used. Since most sources are optional, they
should be checked in the order described by the table below, displaying the first one available.</p>
<table>
<thead>
<tr>
<th>View type</th>
<th>Name priorities</th>
</tr>
</thead>
<tbody>
<tr>
<td>Conversation - normal</td>
<td>Roster name, (Address book), User nickname, Local part</td>
</tr>
<tr>
<td>Conversation - group</td>
<td>Roster name, (Address book), User nickname, Resource (*)</td>
</tr>
<tr>
<td>Conversation - channel</td>
<td>Resource</td>
</tr>
<tr>
<td>Contact list</td>
<td>Roster name, User nickname, Bare JID</td>
</tr>
<tr>
<td>User profile</td>
<td>Roster name, User nickname, Bare JID</td>
</tr>
</tbody>
</table>
<p>(*) Mentions refer to resource. if you do proper references you can live replace it with the 'nice' name.</p>
<p>Avatar display should follow the same order</p>
<h2 id="auto-generated-colors">Auto-generated colors<a class="headerlink" href="#auto-generated-colors" title="Permanent link">&para;</a></h2>
<p>A client may want to associate a color with a user. Example use cases for this include, but are not limited to:</p>
<ul>
<li>Dummy avatars in contexts where an avatar cannot be or has not yet been retrieved</li>
<li>Coloring the user name in a conversation log (be aware that this needs to be done very carefully to be accessible!)</li>
</ul>
<p>To generate a color for a user, the algorithm described in <a href="https://xmpp.org/extensions/xep-0392.html">XEP-0392</a> MUST be used.</p>
<h3 id="generator-input-based-on-context">Generator input based on context<a class="headerlink" href="#generator-input-based-on-context" title="Permanent link">&para;</a></h3>
<p>The generator described in XEP-0392 needs a text input to operate and for which a deterministic color will be generated.</p>
<p>The following table lists which strings to use as input for the generator:</p>
<table>
<thead>
<tr>
<th>View type</th>
<th>Generator Input</th>
</tr>
</thead>
<tbody>
<tr>
<td>Conversation - normal</td>
<td>Normalised Bare JID</td>
</tr>
<tr>
<td>Conversation - group</td>
<td>Normalised Bare JID</td>
</tr>
<tr>
<td>Conversation - channel</td>
<td>Resource</td>
</tr>
<tr>
<td>Contact list</td>
<td>Normalised Bare JID</td>
</tr>
<tr>
<td>User profile</td>
<td>Normalised Bare JID</td>
</tr>
</tbody>
</table>
<h3 id="contrast-ratio-considerations">Contrast ratio considerations<a class="headerlink" href="#contrast-ratio-considerations" title="Permanent link">&para;</a></h3>
<p>To provide a good contrast ratio for accessibility of the resulting user interface, the guidelines from <sup id="fnref2:color"><a class="footnote-ref" href="#fn:color">1</a></sup> should be obeyed. XEP-0392 intentionally allows the implementation to pick a saturation and lightness value based on the environment to allow for high contrast.</p>
<p>Contrast considerations apply between the generated color and the background, as well as for text rendered on top of the generated color (for example in a dummy avatar).</p>
<!-- Footnotes -->

<div class="footnote">
<hr />
<ol>
<li id="fn:color">
<p>Resources for the use of color in interface design:</p>
<ul>
<li><a href="https://www.w3.org/WAI/WCAG21/Understanding/use-of-color.html">WCAG 2.1: Understanding Use of Color</a></li>
<li><a href="https://webaim.org/resources/contrastchecker/">Color contrast checker</a></li>
</ul>
<p><a class="footnote-backref" href="#fnref:color" title="Jump back to footnote 1 in the text">&#8617;</a><a class="footnote-backref" href="#fnref2:color" title="Jump back to footnote 1 in the text">&#8617;</a></p>
</li>
<li id="fn:tls-mode">
<p>This is presented as a multiple-choice option. A checkbox labeled e.g. "Direct TLS"
may confuse users by implying that the opposite of "Direct TLS" is potentially "No TLS". Security is
not an option, and TLS is always used. This option is about what style the server supports.&#160;<a class="footnote-backref" href="#fnref:tls-mode" title="Jump back to footnote 2 in the text">&#8617;</a></p>
</li>
</ol>
</div></div>
            </div>
        </div>

        <footer class="col-md-12">
            <hr>
            <p>Documentation built with <a href="https://www.mkdocs.org/">MkDocs</a>.</p>
        </footer>
        <script>
            var base_url = "../..",
                shortcuts = {"help": 191, "next": 78, "previous": 80, "search": 83};
        </script>
        <script src="../../js/base.js" defer></script>
        <script src="../../search/main.js" defer></script>

        <div class="modal" id="mkdocs_search_modal" tabindex="-1" role="dialog" aria-labelledby="searchModalLabel" aria-hidden="true">
    <div class="modal-dialog modal-lg">
        <div class="modal-content">
            <div class="modal-header">
                <h4 class="modal-title" id="searchModalLabel">Search</h4>
                <button type="button" class="close" data-dismiss="modal"><span aria-hidden="true">&times;</span><span class="sr-only">Close</span></button>
            </div>
            <div class="modal-body">
                <p>
                    From here you can search these documents. Enter
                    your search terms below.
                </p>
                <form>
                    <div class="form-group">
                        <input type="search" class="form-control" placeholder="Search..." id="mkdocs-search-query" title="Type search term here">
                    </div>
                </form>
                <div id="mkdocs-search-results"></div>
            </div>
            <div class="modal-footer">
            </div>
        </div>
    </div>
</div><div class="modal" id="mkdocs_keyboard_modal" tabindex="-1" role="dialog" aria-labelledby="keyboardModalLabel" aria-hidden="true">
    <div class="modal-dialog">
        <div class="modal-content">
            <div class="modal-header">
                <h4 class="modal-title" id="keyboardModalLabel">Keyboard Shortcuts</h4>
                <button type="button" class="close" data-dismiss="modal"><span aria-hidden="true">&times;</span><span class="sr-only">Close</span></button>
            </div>
            <div class="modal-body">
              <table class="table">
                <thead>
                  <tr>
                    <th style="width: 20%;">Keys</th>
                    <th>Action</th>
                  </tr>
                </thead>
                <tbody>
                  <tr>
                    <td class="help shortcut"><kbd>?</kbd></td>
                    <td>Open this help</td>
                  </tr>
                  <tr>
                    <td class="next shortcut"><kbd>n</kbd></td>
                    <td>Next page</td>
                  </tr>
                  <tr>
                    <td class="prev shortcut"><kbd>p</kbd></td>
                    <td>Previous page</td>
                  </tr>
                  <tr>
                    <td class="search shortcut"><kbd>s</kbd></td>
                    <td>Search</td>
                  </tr>
                </tbody>
              </table>
            </div>
            <div class="modal-footer">
            </div>
        </div>
    </div>
</div>

    </body>
</html>
